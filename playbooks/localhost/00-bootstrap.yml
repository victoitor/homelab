---

- hosts: localhost

  tasks:
  - name: Print facts
    debug:
      var: ansible_facts

  - name: "{{ ansible_facts['user_id'] }} is sudoer with NOPASS: ALL"
    template:
      src: sudoers.j2
      dest: "/etc/sudoers.d/{{ ansible_facts['user_id'] }}"
      owner: root
      group: root
      mode: 0440
    become: true

  - name: Configure timezone
    timezone: name=America/Fortaleza
    become: true

  - name: unattended-upgrades are installed
    apt:
      name: 
      - unattended-upgrades
      update_cache: yes
    become: true

  - name: Configure unattended-upgrades
    copy:
      src: 20auto-upgrades
      dest: /etc/apt/apt.conf.d/20auto-upgrades
      owner: root
      group: root
      mode: 0644
    become: true
